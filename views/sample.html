<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baby Check-in</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/babyRegistration.css">
</head>
<body>
    <div class="container-shop">
        <header>
            <!-- Include your navbar here -->
            <!-- Example: <nav>...</nav> -->
        </header>
        <main>
            <div class="container-babyReg">
                <h2 class="h2-babyReg">DayStar Baby Check-in Form</h2>
                <form id="registrationForm" action="/checkInBaby?id=<%= baby._id %>" method="POST" onsubmit="return validateForm()">
                    <div class="form-row">
                        <div style="flex-basis: 48%">
                            <label for="firstName">First Name:</label>
                            <input id="firstName" type="text" name="firstName" value="<%= baby.firstName %>" readonly>
                        </div>
                        <div style="flex-basis: 48%">
                            <label for="lastName">Last Name:</label>
                            <input id="lastName" type="text" name="lastName" value="<%= baby.lastName %>" readonly>
                        </div>
                    </div>
                    <div class="form-row">
                        <div style="flex-basis: 48%">
                            <label for="babyNumber">Baby Number:</label>
                            <input id="babyNumber" type="text" name="babyNumber" value="<%= baby.babyNumber %>" readonly>
                        </div>
                        <div style="flex-basis: 48%">
                            <label for="address">Address:</label>
                            <input id="address" type="text" name="address" value="<%= baby.address %>" readonly>
                        </div>
                    </div>
                    <div class="form-row">
                        <div style="flex-basis: 48%">
                            <label for="broughtBy">Brought By:</label>
                            <input id="broughtBy" type="text" name="broughtBy" required>
                        </div>
                        <div style="flex-basis: 48%">
                            <label for="stayPeriod">Stay Period:</label>
                            <select id="stayPeriod" name="stayPeriod" onchange="updateFee()">
                                <option value="">Select</option>
                                <option value="halfDay">Half Day</option>
                                <option value="fullDay">Full Day</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div style="flex-basis: 48%">
                            <label for="arrivalTime">Arrival Time:</label>
                            <input id="arrivalTime" type="time" name="arrivalTime" value="" readonly>
                        </div>
                        <div style="flex-basis: 48%">
                            <label for="fee">Fee (UGX):</label>
                            <input id="fee" type="number" name="fee" value="" readonly>
                        </div>
                    </div>
                    <div class="form-row">
                        <div style="flex-basis: 48%">
                            <label for="sitter">Sitter:</label>
                            <select id="sitter" name="sitter">
                                <% if (sitters.length) { %>
                                    <% sitters.forEach(function(sitter) { %>
                                        <option value="<%= sitter._id %>"><%= sitter.sitterName %></option>
                                    <% }); %>
                                <% } %>
                            </select>
                        </div>
                        <div style="flex-basis: 48%">
                            <input id="status" type="hidden" name="status" value="Present">
                        </div>
                    </div>
                    <button class="btn-babyReg" type="submit">Check-in Baby</button>
                </form>
            </div>
        </main>
        <footer>
            <!-- Include your footer here -->
            <!-- Example: <footer>...</footer> -->
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/css/bootstrap/js/bootstrap.bundle.js"></script>
    <script>
        // Client-side JavaScript for form validation and dynamic behavior
        function validateForm() {
            const broughtBy = document.getElementById('broughtBy').value;
            const stayPeriod = document.getElementById('stayPeriod').value;
            
            if (!broughtBy || !stayPeriod) {
                alert('Please fill out all required fields.');
                return false;
            }
            return true;
        }

        function updateFee() {
            const stayPeriod = document.getElementById('stayPeriod').value;
            const feeInput = document.getElementById('fee');
            
            if (stayPeriod === 'halfDay') {
                feeInput.value = '10000';
            } else if (stayPeriod === 'fullDay') {
                feeInput.value = '15000';
            } else {
                feeInput.value = '';
            }
        }

        // Set current time in Arrival Time input
        const arrivalTimeInput = document.getElementById('arrivalTime');
        const currentTime = new Date().toLocaleTimeString('en-US', { hour12: false });
        arrivalTimeInput.value = currentTime;
    </script>
</body>
</html>
